<!DOCTYPE html>
<html lang="en">
<head>
    <title>Show Local Weather</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="icon" href="http://adrienatallah.github.io/images/icon/agreloy.png">

    <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
    <link href="styles.css" rel="stylesheet" type="text/css">


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.1/animate.min.css">

</head>
<body id="pbody">
    <div class="container-fluid">
        <div class="jumbotron jumbotron-fluid text-center">
            <div class="row text-center">
                <h2>Local Weather</h2>
            </div>

            <div class="row text-center">

                <div class="col-xs-12 well message">


                </div>

            </div>

            <div class="row text-center">

                <button id="getQuote" class="btn btn-primary btn-lg">
                    Show Local Weather
                </button>

                <a id="tweet" target="_blank" href="https://twitter.com/intent/tweet?text='Don’t worry if it doesn’t work right. If everything did, you’d be out of a job.' -Mosher’s Law of Software Engineering">
                    <button class="btn btn-primary btn-lg">
                        Tweet this
                    </button>
                </a>
            </div>
        </div>

        <footer>
            <p id="credit">Coded By: <a href="https://github.com/adrienatallah" target="_blank">Adrien Atallah</a>.</p>
        </footer>

    </div>


    <script type="text/javascript">
    $(function() {
        $("#getQuote").on("click", function() {
            $.ajax({ //get ip
                url: "https://jsonip.com/?callback=?",
                dataType: "jsonp",
                jsonpCallback: "gotIp"
            });
        });	//end click
    });

    function gotIp(ipData){
        var ip = ipData.ip;
        var locationURL = "https://geoip.nekudo.com/api/" + ip;

        $.ajax({ //get location, longitude and latitude
            url: locationURL,
            dataType: "jsonp",
            jsonpCallback: "gotLocation"
        });

    }; //end gotQuote

    function gotLocation(locationData) {
        var lat = locationData.location.latitude;
        var long = locationData.location.longitude;
        var weatherURL = "api.openweathermap.org/data/2.5/weather?lat=" + lat + "&lon=" + long;
        //console.log(lat, long);

        $.ajax({
            url: weatherURL,
            dataType: "jsonp",
            jsonpCallback: "gotWeather"
        });

    };

    function gotWeather(weatherData) {

        console.log(weatherData);
    };

    </script>
</body>
</html>
